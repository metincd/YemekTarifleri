{% extends 'base.html' %}

{% block content %}
<h1>{{ recipe.title }}</h1>
<img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" width="200">
<p>{{ recipe.instructions }}</p>

<p>Ortalama Puan: {{ average_rating|default:"Henüz puan verilmemiş" }}</p>

<h2>Yorumlar</h2>
{% for comment in comments %}
<div class="comment">
    <strong>{{ comment.author.username }}</strong>:
    <p>{{ comment.content }}</p>
</div>
{% empty %}
<p>Bu tarife henüz yorum yapılmamış.</p>
{% endfor %}

{% if user.is_authenticated %}
<h3>Yorum Yap</h3>
<form method="post" action="">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <input type="submit" name="submit_comment" value="Yorum Gönder">
</form>
{% endif %}

{% if user.is_authenticated %}
<h3>Puan Ver</h3>
<form method="post" action="">
    {% csrf_token %}
    {{ rating_form.as_p }}
    <input type="submit" name="submit_rating" value="Puan Ver">
</form>
{% endif %}

{% endblock %}
